const p=()=>Math.random().toString(36).slice(2,10);function f(r){const i=r.get("name")||"Unnamed Entity",e=r.get("resource_id")||r.get("resourceId")||p(),s={x:50,y:50},t=[{id:`entity-${e}`,nodeType:"entity",label:i,position:s}],n=[],c=r.get("components.script.scripts")||{};return Object.keys(c).forEach((o,a)=>{var l;const u=`entity-${e}-script-${o}-${a}`,y={id:u,nodeType:"script",label:o,scriptName:o,scriptAttributes:((l=c[o])==null?void 0:l.attributes)||{},position:{x:s.x+320,y:s.y+a*180}};t.push(y),n.push({id:`edge-${e}-${o}-${a}`,source:`entity-${e}`,target:u})}),{entityName:i,nodes:t,edges:n}}chrome.runtime.onMessage.addListener((r,i,e)=>{var s;if((r==null?void 0:r.type)==="GRAPH_REQUEST_DATA"){try{const t=window.editor;if(!t)return e({success:!1,error:"PlayCanvas editor not detected"}),!0;const n=((s=t.call)==null?void 0:s.call(t,"selector:items"))||[];if(!n.length)return e({success:!0,data:{entityName:"No entity selected",nodes:[],edges:[]}}),!0;const c=n[0],d=f(c);e({success:!0,data:d})}catch(t){e({success:!1,error:t instanceof Error?t.message:"Unknown error occurred"})}return!0}return!1});
